<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Drawing Lines or Polygons with Raster Information — mosaic_draw • pliman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Drawing Lines or Polygons with Raster Information — mosaic_draw"><meta name="description" content="Drawing Lines or Polygons with Raster Information"><meta property="og:description" content="Drawing Lines or Polygons with Raster Information"><meta property="og:image" content="https://nepem-ufsc.github.io/pliman/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VWN5YL53DP"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VWN5YL53DP');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pliman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples"><li><a class="dropdown-item" href="../articles/indexes.html">Image indexes</a></li>
    <li><a class="dropdown-item" href="../articles/manipulation.html">Image manipulation</a></li>
    <li><a class="dropdown-item" href="../articles/segmentation.html">Image segmentation</a></li>
    <li><a class="dropdown-item" href="../articles/polygons.html">Polygons</a></li>
    <li><a class="dropdown-item" href="../articles/analyze_objects.html">Analyze objects in an image</a></li>
    <li><a class="dropdown-item" href="../articles/leaf_area.html">Measure leaf area</a></li>
    <li><a class="dropdown-item" href="../articles/phytopatometry.html">Phytopatometry</a></li>
    <li><a class="dropdown-item" href="../articles/htp.html">High Throughput Phenotyping</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><a class="dropdown-item" href="../news/index.html">Package news</a></li>
    <li><a class="external-link dropdown-item" href="https://olivoto.netlify.app/">Blog posts</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">More</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-more"><li><a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
    <li><a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../ISSUE_TEMPLATE.html">Issues</a></li>
    <li><a class="dropdown-item" href="../SUPPORT.html">Support</a></li>
    <li><a class="dropdown-item" href="../LICENSE.html">Licence</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://www.researchgate.net/profile/Tiago_Olivoto2"><span class="fa aria fab fa-researchgate fa-2x aria-label"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/TiagoOlivoto"><span class="fa fa-github fa-2x"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/tolivoto"><span class="fa fab fa-twitter fa-2x"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.mendeley.com/profiles/tiago-olivoto/"><span class="fa fab fa-mendeley fa-2x"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Drawing Lines or Polygons with Raster Information</h1>
      <small class="dont-index">Source: <a href="NA/NA/NA/blob/HEAD/R/utils_mosaic.R"><code>R/utils_mosaic.R</code></a></small>
      <div class="d-none name"><code>mosaic_draw.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Drawing Lines or Polygons with Raster Information</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mosaic_draw</span><span class="op">(</span></span>
<span>  <span class="va">mosaic</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  g <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  b <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  re <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  nir <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  index <span class="op">=</span> <span class="st">"NGRDI"</span>,</span>
<span>  show <span class="op">=</span> <span class="st">"rgb"</span>,</span>
<span>  segment <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  viewer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mapview"</span>, <span class="st">"base"</span><span class="op">)</span>,</span>
<span>  threshold <span class="op">=</span> <span class="st">"Otsu"</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  summarize_fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  buffer <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  color_regions <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/flip.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  max_pixels <span class="op">=</span> <span class="fl">1e+06</span>,</span>
<span>  downsample <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quantiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot_layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mosaic">mosaic<a class="anchor" aria-label="anchor" href="#arg-mosaic"></a></dt>
<dd><p>A mosaic of class <code>SpatRaster</code>, generally imported with
<code><a href="mosaic_input.html">mosaic_input()</a></code>.</p></dd>


<dt id="arg-r-g-b-re-nir">r, g, b, re, nir<a class="anchor" aria-label="anchor" href="#arg-r-g-b-re-nir"></a></dt>
<dd><p>The red, green, blue, red-edge, and  near-infrared bands
of the image, respectively. By default, the function assumes a BGR as input
(b = 1, g = 2, r = 3). If a multispectral image is provided up to seven
bands can be used to compute built-in indexes. There are no limitation of
band numbers if the index is computed using the band name.</p></dd>


<dt id="arg-index">index<a class="anchor" aria-label="anchor" href="#arg-index"></a></dt>
<dd><p>The index to use for the index view. Defaults to "B".</p></dd>


<dt id="arg-show">show<a class="anchor" aria-label="anchor" href="#arg-show"></a></dt>
<dd><p>The display option for the map view. Options are "rgb" for RGB
view and "index" for index view.</p></dd>


<dt id="arg-segment">segment<a class="anchor" aria-label="anchor" href="#arg-segment"></a></dt>
<dd><p>Should the raster object be segmented? If set to <code>TRUE</code>,
pixels within each polygon/rectangle will be segmented based on the
<code>threshold</code> argument.</p></dd>


<dt id="arg-viewer">viewer<a class="anchor" aria-label="anchor" href="#arg-viewer"></a></dt>
<dd><p>The viewer option. If not provided, the value is retrieved
using <code><a href="get_pliman_viewer.html">get_pliman_viewer()</a></code>. This option controls the type of viewer to use
for interactive plotting. The available options are "base" and "mapview".
If set to "base", the base R graphics system is used for interactive
plotting. If set to "mapview", the mapview package is used. To set this
argument globally for all functions in the package, you can use the
<code><a href="set_pliman_viewer.html">set_pliman_viewer()</a></code> function. For example, you can run
<code>set_pliman_viewer("mapview")</code> to set the viewer option to "mapview" for
all functions.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>By default (threshold = "Otsu"), a threshold value based on
Otsu's method is used to reduce the grayscale image to a binary image. If a
numeric value is informed, this value will be used as a threshold.</p></dd>


<dt id="arg-invert">invert<a class="anchor" aria-label="anchor" href="#arg-invert"></a></dt>
<dd><p>Inverts the mask if desired. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-summarize-fun">summarize_fun<a class="anchor" aria-label="anchor" href="#arg-summarize-fun"></a></dt>
<dd><p>An optional function or character vector. When
<code>summarize_fun = "mean"</code>, the mean values of <code>index</code> are calculated within
each object. For more details on available functions, refer to
<code><a href="https://isciences.gitlab.io/exactextractr/reference/exact_extract.html" class="external-link">exactextractr::exact_extract()</a></code>.</p></dd>


<dt id="arg-buffer">buffer<a class="anchor" aria-label="anchor" href="#arg-buffer"></a></dt>
<dd><p>Adds a buffer around the geometries of the SpatVector created.
Note that the distance unit of <code>buffer</code> will vary according to the CRS of
<code>mosaic</code>.</p></dd>


<dt id="arg-color-regions">color_regions<a class="anchor" aria-label="anchor" href="#arg-color-regions"></a></dt>
<dd><p>The color palette for displaying index values. Defaults
to <code>rev(grDevices::terrain.colors(50))</code>.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>opacity of the fill color of the raster layer(s).</p></dd>


<dt id="arg-max-pixels">max_pixels<a class="anchor" aria-label="anchor" href="#arg-max-pixels"></a></dt>
<dd><p>Maximum number of pixels to render in the map or plot
(default: 500000).</p></dd>


<dt id="arg-downsample">downsample<a class="anchor" aria-label="anchor" href="#arg-downsample"></a></dt>
<dd><p>Downsampling factor to reduce the number of pixels
(default: NULL). In this case, if the number of pixels in the image (width
x height) is greater than <code>max_pixels</code> a downsampling factor will be
automatically chosen so that the number of plotted pixels approximates the
<code>max_pixels</code>.</p></dd>


<dt id="arg-quantiles">quantiles<a class="anchor" aria-label="anchor" href="#arg-quantiles"></a></dt>
<dd><p>the upper and lower quantiles used for color stretching.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Plots the draw line/rectangle? Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-plot-layout">plot_layout<a class="anchor" aria-label="anchor" href="#arg-plot-layout"></a></dt>
<dd><p>The de plot layout. Defaults to <code>plot_layout = c(1, 2, 3, 3)</code>. Ie., the first row has two plots, and the second row has one plot.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An invisible list containing the mosaic, draw_data, distance,
distance_profile, geometry, and map.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>mosaic_draw</code> function enables you to create mosaic drawings from
remote sensing data and compute vegetation indices.</p><ul><li><p>If a line is drawn using the "Draw Polyline" tool, the profile of <code>index</code> is
displayed on the y-axis along the line's distance, represented in meter
units. It is important to ensure that the Coordinate Reference System (CRS)
of <code>mosaic</code> has latitude/longitude units for accurate distance
representation.</p></li>
<li><p>If a rectangle or polygon is drawn using the "Draw Rectangle" or "Draw Polygon"
tools, the <code>index</code> values are calculated for each object. By default, the
raw data is returned. You can set the <code>summarize_fun</code> to compute a summary
statistic for each object.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nepem-ufsc.github.io/pliman/">pliman</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Load a raster showing the elevation of Luxembourg</span></span></span>
<span class="r-in"><span><span class="va">mosaic</span> <span class="op">&lt;-</span> <span class="fu"><a href="mosaic_input.html">mosaic_input</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/elev.tif"</span>, package<span class="op">=</span><span class="st">"terra"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># draw a polyline to see the elevation profile along the line</span></span></span>
<span class="r-in"><span><span class="fu">mosaic_draw</span><span class="op">(</span><span class="va">mosaic</span>, buffer <span class="op">=</span> <span class="fl">1500</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://olivoto.netlify.app/" class="external-link">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

