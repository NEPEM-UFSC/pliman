<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Utilities for working with image objects — utils_objects • pliman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Utilities for working with image objects — utils_objects"><meta name="description" content="

object_id() get the object identification in an image.
object_coord() get the object coordinates and (optionally) draw a
bounding rectangle around multiple objects in an image.
object_contour() returns the coordinates (x and y) for the contours
of each object in the image.
object_isolate() isolates an object from an image.

"><meta property="og:description" content="

object_id() get the object identification in an image.
object_coord() get the object coordinates and (optionally) draw a
bounding rectangle around multiple objects in an image.
object_contour() returns the coordinates (x and y) for the contours
of each object in the image.
object_isolate() isolates an object from an image.

"><meta property="og:image" content="https://nepem-ufsc.github.io/pliman/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pliman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Image analysis</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/manipulation.html">Image manipulation</a></li>
    <li><a class="dropdown-item" href="../articles/indexes.html">Image indexes</a></li>
    <li><a class="dropdown-item" href="../articles/segmentation.html">Image segmentation</a></li>
    <li><a class="dropdown-item" href="../articles/polygons.html">Polygons</a></li>
    <li><a class="dropdown-item" href="../articles/analyze_objects.html">Image analysis</a></li>
    <li><a class="dropdown-item" href="../articles/leaf_area.html">Measure leaf area</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/phytopatometry.html">Phytopatometry</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/htp.html">High Throughput Phenotyping</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><a class="dropdown-item" href="../news/index.html">Package news</a></li>
    <li><a class="external-link dropdown-item" href="https://olivoto.netlify.app/">Blog posts</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">More</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-more"><li><a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
    <li><a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../ISSUE_TEMPLATE.html">Issues</a></li>
    <li><a class="dropdown-item" href="../SUPPORT.html">Support</a></li>
    <li><a class="dropdown-item" href="../LICENSE.html">Licence</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Utilities for working with image objects</h1>
      <small class="dont-index">Source: <a href="NA/NA/NA/blob/HEAD/R/utils_objects.R"><code>R/utils_objects.R</code></a></small>
      <div class="d-none name"><code>utils_objects.Rd</code></div>
    </div>

    <div class="ref-description section level2">

<ul><li><p><code>object_id()</code> get the object identification in an image.</p></li>
<li><p><code>object_coord()</code> get the object coordinates and (optionally) draw a
bounding rectangle around multiple objects in an image.</p></li>
<li><p><code>object_contour()</code> returns the coordinates (<code>x</code> and <code>y</code>) for the contours
of each object in the image.</p></li>
<li><p><code>object_isolate()</code> isolates an object from an image.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">object_coord</span><span class="op">(</span></span>
<span>  <span class="va">img</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  index <span class="op">=</span> <span class="st">"NB"</span>,</span>
<span>  watershed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  opening <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  closing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fill_hull <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  threshold <span class="op">=</span> <span class="st">"Otsu"</span>,</span>
<span>  edge <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  extension <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tolerance <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  object_size <span class="op">=</span> <span class="st">"medium"</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  workers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">object_contour</span><span class="op">(</span></span>
<span>  <span class="va">img</span>,</span>
<span>  pattern <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dir_original <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  index <span class="op">=</span> <span class="st">"NB"</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  opening <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  closing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fill_hull <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  threshold <span class="op">=</span> <span class="st">"Otsu"</span>,</span>
<span>  watershed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  extension <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tolerance <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  object_size <span class="op">=</span> <span class="st">"medium"</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  workers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">object_isolate</span><span class="op">(</span><span class="va">img</span>, id <span class="op">=</span> <span class="cn">NULL</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>, workers <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">object_id</span><span class="op">(</span><span class="va">img</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>, workers <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-img">img<a class="anchor" aria-label="anchor" href="#arg-img"></a></dt>
<dd><p>An image of class <code>Image</code> or a list of <code>Image</code> objects.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><ul><li><p>For <code>object_coord()</code>, a vector (or scalar) of object <code>id</code> to compute the
bounding rectangle. Object ids can be obtained with <code>object_id()</code>. Set <code>id = "all"</code> to compute the coordinates for all objects in the image. If <code>id = NULL</code> (default) a bounding rectangle is drawn including all the objects.</p></li>
<li><p>For <code>object_isolate()</code>, a scalar that identifies the object to be extracted.</p></li>
</ul></dd>


<dt id="arg-index">index<a class="anchor" aria-label="anchor" href="#arg-index"></a></dt>
<dd><p>The index to produce a binary image used to compute bounding
rectangle coordinates. See <code><a href="image_binary.html">image_binary()</a></code> for more details.</p></dd>


<dt id="arg-watershed">watershed<a class="anchor" aria-label="anchor" href="#arg-watershed"></a></dt>
<dd><p>If <code>TRUE</code> (default) performs watershed-based object
detection. This will detect objects even when they are touching one other.
If <code>FALSE</code>, all pixels for each connected set of foreground pixels are set
to a unique object. This is faster but is not able to segment touching
objects.</p></dd>


<dt id="arg-invert">invert<a class="anchor" aria-label="anchor" href="#arg-invert"></a></dt>
<dd><p>Inverts the binary image, if desired. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-opening-closing-filter">opening, closing, filter<a class="anchor" aria-label="anchor" href="#arg-opening-closing-filter"></a></dt>
<dd><p><strong>Morphological operations (brush size)</strong></p><ul><li><p><code>opening</code> performs an erosion followed by a dilation. This helps to
remove small objects while preserving the shape and size of larger objects.</p></li>
<li><p><code>closing</code> performs a dilatation followed by an erosion. This helps to
fill small holes while preserving the shape and size of larger objects.</p></li>
<li><p><code>filter</code> performs median filtering in the binary image. Provide a positive
integer &gt; 1 to indicate the size of the median filtering. Higher values are
more efficient to remove noise in the background but can dramatically impact
the perimeter of objects, mainly for irregular perimeters such as leaves
with serrated edges.</p></li>
</ul><p>Hierarchically, the operations are performed as opening &gt; closing &gt; filter.
The value declared in each argument will define the brush size.</p></dd>


<dt id="arg-fill-hull">fill_hull<a class="anchor" aria-label="anchor" href="#arg-fill-hull"></a></dt>
<dd><p>Fill holes in the objects? Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>By default (<code>threshold = "Otsu"</code>), a threshold value based
on Otsu's method is used to reduce the grayscale image to a binary image.
If a numeric value is informed, this value will be used as a threshold.
Inform any non-numeric value different than "Otsu" to iteratively chosen
the threshold based on a raster plot showing pixel intensity of the index.</p></dd>


<dt id="arg-edge">edge<a class="anchor" aria-label="anchor" href="#arg-edge"></a></dt>
<dd><p>The number of pixels in the edge of the bounding rectangle.
Defaults to <code>2</code>.</p></dd>


<dt id="arg-extension-tolerance-object-size">extension, tolerance, object_size<a class="anchor" aria-label="anchor" href="#arg-extension-tolerance-object-size"></a></dt>
<dd><p>Controls the watershed segmentation of
objects in the image. See <code><a href="analyze_objects.html">analyze_objects()</a></code> for more details.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Processes the images asynchronously (in parallel) in separate
R sessions running in the background on the same machine. It may speed up
the processing time when <code>image</code> is a list. The number of sections is set
up to 50% of available cores.</p></dd>


<dt id="arg-workers">workers<a class="anchor" aria-label="anchor" href="#arg-workers"></a></dt>
<dd><p>A positive numeric scalar or a function specifying the maximum
number of parallel processes that can be active at the same time.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Shows the image with bounding rectangles? Defaults to
<code>TRUE</code>.</p></dd>


<dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p>A pattern of file name used to identify images to be imported.
For example, if <code>pattern = "im"</code> all images in the current working directory
that the name matches the pattern (e.g., img1.-, image1.-, im2.-) will be
imported as a list. Providing any number as pattern (e.g., <code>pattern = "1"</code>)
will select images that are named as 1.-, 2.-, and so on. An error will be
returned if the pattern matches any file that is not supported (e.g.,
img1.pdf).</p></dd>


<dt id="arg-dir-original">dir_original<a class="anchor" aria-label="anchor" href="#arg-dir-original"></a></dt>
<dd><p>The directory containing the original images. Defaults
to <code>NULL</code>, which means that the current working directory will be
considered.</p></dd>


<dt id="arg-center">center<a class="anchor" aria-label="anchor" href="#arg-center"></a></dt>
<dd><p>If <code>TRUE</code> returns the object contours centered on the origin.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If <code>TRUE</code> (default) a summary is shown in the console.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><ul><li><p>For <code>object_isolate()</code>, further arguments passed on to <code>object_coord()</code>.</p></li>
<li><p>For <code>object_id()</code>, further arguments passed on to <code><a href="analyze_objects.html">analyze_objects()</a></code>.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p><code>object_id()</code> An image of class <code>"Image"</code> containing the object's
identification.</p></li>
<li><p><code>object_coord()</code> A list with the coordinates for the bounding rectangles.
If <code>id = "all"</code> or a numeric vector, a list with a vector of coordinates is
returned.</p></li>
<li><p><code>object_isolate()</code> An image of class <code>"Image"</code> containing the isolated
object.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"EBImage"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nepem-ufsc.github.io/pliman/">pliman</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="utils_image.html">image_pliman</a></span><span class="op">(</span><span class="st">"la_leaves.jpg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Get the object's (leaves) identification</span></span></span>
<span class="r-in"><span><span class="fu">object_id</span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get the coordinates and draw a bounding rectangle around leaves 1 and 3</span></span></span>
<span class="r-in"><span><span class="fu">object_coord</span><span class="op">(</span><span class="va">img</span>, id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Isolate leaf 3</span></span></span>
<span class="r-in"><span><span class="va">isolated</span> <span class="op">&lt;-</span> <span class="fu">object_isolate</span><span class="op">(</span><span class="va">img</span>, id <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">isolated</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="utils_objects-1.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="utils_objects-2.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="utils_objects-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://olivoto.netlify.app/" class="external-link">Tiago Olivoto</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

