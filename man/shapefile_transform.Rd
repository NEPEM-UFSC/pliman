% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_shapefile.R
\name{shapefile_transform}
\alias{shapefile_transform}
\title{Apply Affine Transformations to Spatial Grids}
\usage{
shapefile_transform(
  shapefile,
  shift_x = 0,
  shift_y = 0,
  angle = 0,
  scale_x = 1,
  scale_y = 1
)
}
\arguments{
\item{shapefile}{An \code{sf} object containing the polygons to be transformed.}

\item{shift_x}{Numeric. Translation along the X-axis (in map units). Positive values move right. Default is 0.}

\item{shift_y}{Numeric. Translation along the Y-axis (in map units). Positive values move up. Default is 0.}

\item{angle}{Numeric. Rotation angle in degrees. Positive values rotate the grid \strong{clockwise} (compass direction). Default is 0.}

\item{scale_x}{Numeric. Scaling factor for the X-axis (width). Values > 1 expand, values < 1 compress. Default is 1.0.}

\item{scale_y}{Numeric. Scaling factor for the Y-axis (height). Values > 1 expand, values < 1 compress. Default is 1.0.}
}
\value{
An \code{sf} object with the transformed geometry, preserving all original attributes.
}
\description{
Rotates, shifts, and scales (anisotropically) an \code{sf} object containing
grid polygons. This function is particularly useful for manually aligning
experimental grids over non-georeferenced imagery (e.g., drone flights)
by adjusting the grid's pose to match the visual features.
}
\details{
The transformations are applied in the following order for each vertex:
\enumerate{
\item \strong{Centering:} Vertices are translated so the grid's global centroid becomes (0,0).
\item \strong{Scaling:} Anisotropic scaling is applied (\code{scale_x}, \code{scale_y}).
\item \strong{Rotation:} Rotation is applied around the centroid. Positive angles rotate \strong{clockwise}.
\item \strong{Translation:} The grid is moved back to its original position plus the defined offsets (\code{shift_x}, \code{shift_y}).
}

This logic ensures the grid rotates and expands "in place" rather than flying
off relative to the coordinate origin.
}
\examples{
if(interactive()){
library(pliman)
shp <- system.file("ex/lux.shp", package="terra")
shp_file <- shapefile_input(shp)
shapefile_plot(shp_file)
rot <- shapefile_transform(shp_file, angle = 5)
shapefile_plot(rot, add = TRUE, border = "red")

}
}
