% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_imagem.R
\name{get_card_colors}
\alias{get_card_colors}
\title{Extract Mean Colors from a Color Checker Card}
\usage{
get_card_colors(
  img,
  index = "GRAY",
  nrow = NULL,
  ncol = NULL,
  erode = NULL,
  xpix = NULL,
  ypix = NULL,
  plot = TRUE
)
}
\arguments{
\item{img}{An \code{Image} object from the \code{EBImage} or \code{pliman} package.}

\item{index}{The vegetation or color index string (e.g., "GRAY", "B", "R")
passed to \code{pliman::image_binary()} to segment the card from the
background. Default is \strong{"GRAY"}.}

\item{nrow}{The number of rows of color patches on the card. If \strong{\code{NULL}}
(default), the function automatically determines this based on the card's
aspect ratio (6 for 6x4, 4 for 4x6).}

\item{ncol}{The number of columns of color patches on the card. If \strong{\code{NULL}}
(default), the function automatically determines this based on the card's
aspect ratio (4 for 6x4, 6 for 4x6).}

\item{erode}{The size (in pixels) of the erosion kernel applied to the
binary mask to shrink the selection and avoid patch edges. If \strong{\code{NULL}}
(default), a value is automatically calculated based on the card's
coverage in the image.}

\item{xpix}{The total width (in pixels) of the sampling rectangle at the
center of each patch. If \strong{\code{NULL}} (default), a value is automatically
calculated based on the card's coverage in the image.}

\item{ypix}{The total height (in pixels) of the sampling rectangle at the
center of each patch. If \strong{\code{NULL}} (default), a value is automatically
calculated based on the card's coverage in the image.}

\item{plot}{Logical. If \strong{\code{TRUE}} (default), displays the original image with
detected corners (red dots), sampling boxes (red rectangles), and
patch IDs.}
}
\value{
a \code{data.frame} with the RGB values for each color chip.
A \code{data.frame} with \code{nrow * ncol} rows and 4 columns:
\itemize{
\item \code{id}: The patch identifier (from 1 to \code{nrow * ncol}).
\item \code{R}: The mean Red channel value (typically 0-1).
\item \code{G}: The mean Green channel value (typically 0-1).
\item \code{B}: The mean Blue channel value (typically 0-1).
}
}
\description{
This function identifies a color checker card in an image, finds its
four corners to correct for perspective distortion, generates a grid
corresponding to the color patches, and extracts the mean RGB values from
the center of each patch.

\strong{Note:} The function attempts to automatically guess appropriate values
for the parameters related to the card's dimensions (\code{nrow}, \code{ncol}) and
the sampling process (\code{erode}, \code{xpix}, \code{ypix}) based on the detected
coverage area of the card in the image. You may override these guesses
by providing explicit values.
}
\examples{
if(interactive(){
library(pliman)
img <- image_pliman("colorcheck.jpg")
get_card_colors(img, xpix = 30, ypix = 30)
}
}
